//##############################################################
//
// basic Job options file for a Gleam execution
// $Header: /nfs/slac/g/glast/ground/cvs/Gleam/src/basicOptions.txt,v 1.8 2002/05/25 03:21:59 burnett Exp $

// primary DLLs

ApplicationMgr.DLLs+= { "GaudiAlg"};

// ----------------------------
// setup basic event loop stuff
//
ApplicationMgr.ExtSvc = { 
    "GlastEventSelector/EventSelector" , 
    "EventCnvSvc"
    };
EventPersistencySvc.CnvServices = {"EventCnvSvc"};
EventSelector.Input = "NONE";


// ----------------------------
//  a structure for the topalg, using sequencer steps
//
ApplicationMgr.TopAlg = {
    "Sequencer/Generator",
    "Sequencer/Digitization",
    "Sequencer/EventDisplay",
    "Sequencer/Triggered" };

// the sequence that is triggered
Triggered.Members={
    "TriggerAlg",
    "Sequencer/Reconstruction",
    "Sequencer/RecoDisplay",
    "Sequencer/Output" };

// ----------------------------
//  Geometry definition
//
ApplicationMgr.DLLs += {"GlastSvc"};
ApplicationMgr.ExtSvc += { "GlastDetSvc"};
// select one of the following 
GlastDetSvc.topVolume="LAT"; 
//GlastDetSvc.topVolume="CsIElement";  // to look at a single full crystal
//GlastDetSvc.topVolume="CALLayer";
//GlastDetSvc.topVolume="CALLayers";
//GlastDetSvc.topVolume="oneTower";
//GlastDetSvc.topVolume="trayReg";
//GlastDetSvc.topVolume="trayBot";

GlastDetSvc.xmlfile="$(XMLGEODBSROOT)/xml/flight/flightSegVols.xml";
GlastDetSvc.visitorMode="recon";

// ----------------------------
//  Generation or input
//
ApplicationMgr.DLLs +={ "G4Generator"};
Generator.Members = {"FluxAlg", "G4Generator"};
#include "$FLUXSVCROOT/src/defaultOptions.txt"

// Append (or replace) the list of source library documents
FluxSvc.source_lib += {"$(G4GENERATORROOT)/src/test/test_sources.xml"};
FluxAlg.source_name="muon_pencil_angle";


// ----------------------------
//  Digitization
//
ApplicationMgr.DLLs +={ "GlastDigi", "CalDigi", "AcdDigi"  };
Digitization.Members = { 
    "TkrSimpleDigiAlg", 
    "CalDigiAlg", 
    "AcdDigiAlg"};


// ----------------------------
//  Trigger calculation
//
ApplicationMgr.DLLs +={ "Trigger"};
Trigger.Members = {"TriggerAlg"};
TriggerAlg.mask = -1; // all bits on by default


// ----------------------------
//   Reconstruction
//
ApplicationMgr.DLLs +={ 
    "Recon",
    "CalRecon"
    };
ApplicationMgr.ExtSvc += {"RecoSvc"};

//          tracker
// -------------------------------------------
Reconstruction.Members += { "Sequencer/TkrReco"};
ApplicationMgr.DLLs     += { "TkrRecon" };
ApplicationMgr.ExtSvc   += { "TkrGeometrySvc"};
ApplicationMgr.ExtSvc   += { "TkrInitSvc"};

TkrReconAlg.PropagatorType=1; // for gismo propagator
TkrInitSvc.TrackerReconType = 0;    // = 0 for Link and Tree, = 1 for Combo
TkrReco.Members = { 
      "TkrClusterAlg", 
      "TkrFindAlg", 
      "TkrReconAlg", 
      "TkrVertexAlg"
      };

//         cal (currently after the tracker)
// -------------------------------------------
Reconstruction.Members += {"Sequencer/CalReco"};
CalReco.Members = {
    "CalXtalRecAlg", 
    "CalClustersAlg"};


// ----------------------------
//   Output
//
ApplicationMgr.DLLs +={ 
    "RootIo"
}; 
Output.Members += {"mcRootWriterAlg", "digiRootWriterAlg", "reconRootWriterAlg"};


// Set output level threshold (2=DEBUG, 3=INFO, 4=WARNING, 5=ERROR, 6=FATAL )
MessageSvc.OutputLevel = 2;
ApplicationMgr.EvtMax = 1000;

// for setting the run number
TriggerAlg.run=100;

//==============================================================
//
// End of job options file
//
//##############################################################

